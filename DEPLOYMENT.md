# Medical Record LLM - 配布・インストールガイド

## 概要

Medical Record LLMは、オフライン環境で動作する医療現場向けローカルLLMチャットアプリケーションです。
このガイドでは、Windowsコンピューターでの配布とインストール方法を説明します。

## 必要要件

### システム要件
- **OS**: Windows 10 (64bit) 以上
- **メモリ**: 8GB以上推奨 (LLMモデルによる)
- **ディスク容量**: 10GB以上の空き容量
- **CPU**: Intel Core i5 相当以上

### 注意事項
- インターネット接続は不要（オフライン動作）
- 管理者権限でのインストールが必要
- ウイルス対策ソフトがブロックする場合があります

## 配布用ファイルの準備

### 1. インストーラーの作成

開発環境で以下のコマンドを実行してWindowsインストーラーを作成：

```bash
# 依存関係をインストール
npm install

# Windowsインストーラーをビルド
npm run dist:win
```

作成されるファイル：
- `dist-electron/Medical Record LLM-1.0.0-Setup.exe`

### 2. LLMモデルの準備

#### Ollamaモデルのエクスポート

1. 開発環境でOllamaからモデルをエクスポート：
```bash
# 使用したいモデルをpull（インターネット接続環境で実行）
ollama pull llama3:latest
ollama pull deepseek-coder:6.7b

# モデルファイルの場所を確認
ollama list
```

2. モデルファイルを取得：
   - Windows: `%USERPROFILE%\.ollama\models`
   - macOS: `~/.ollama/models`
   - Linux: `~/.ollama/models`

#### 配布用パッケージ作成

```
Medical-Record-LLM-Package/
├── Medical Record LLM-1.0.0-Setup.exe
├── models/
│   ├── llama3-latest.gguf
│   ├── deepseek-coder-6.7b.gguf
│   └── README.md
└── インストールガイド.pdf
```

## インストール手順

### 1. 基本インストール

1. **インストーラーの実行**
   ```
   Medical Record LLM-1.0.0-Setup.exe
   ```

2. **インストールウィザードに従う**
   - インストール先を選択（デフォルト: `C:\Program Files\Medical Record LLM`）
   - デスクトップショートカットの作成を選択
   - インストール完了まで待機

3. **初回起動の確認**
   - デスクトップのアイコンをダブルクリック
   - アプリケーションが起動し、ブラウザウィンドウが表示されることを確認

### 2. LLMモデルのインストール

1. **アプリケーションを起動**

2. **モデル管理機能を使用**
   - 左サイドバー下部の「モデル管理」ボタンをクリック
   - 「モデルをインポート」をクリック
   - 準備したモデルファイル（.gguf）を選択

3. **モデルの確認**
   - インポートが完了すると、利用可能なモデル一覧に表示されます
   - チャットでモデルを選択して使用開始

### 3. ユーザーアカウント作成

初回使用時：
1. ログインページで「新規登録」をクリック
2. ユーザー名とパスワードを入力
3. アカウント作成後、自動でログイン

## トラブルシューティング

### よくある問題

#### インストール時の問題

**問題**: 「不明な発行元」の警告が表示される
**解決**: 
1. 「詳細情報」をクリック
2. 「実行」をクリックして続行

**問題**: ウイルス対策ソフトがブロックする
**解決**:
1. 一時的にリアルタイム保護を無効化
2. インストール後に保護を再有効化
3. アプリケーションフォルダを除外設定に追加

#### 起動時の問題

**問題**: アプリが起動しない
**解決**:
1. 管理者として実行
2. Windows Defenderファイアウォールの例外に追加
3. ポート3000が使用されていないか確認

**問題**: 「Ollamaに接続できません」エラー
**解決**:
1. アプリを再起動
2. モデルが正しくインポートされているか確認
3. PCを再起動

#### モデル関連の問題

**問題**: モデルのインポートに失敗する
**解決**:
1. ファイル形式が.ggufであることを確認
2. 十分な空き容量があることを確認
3. ファイルが破損していないか確認

**問題**: チャットの応答が遅い
**解決**:
1. より小さなモデルを使用
2. 他のアプリケーションを終了してメモリを確保
3. システムの再起動

## 配布時の注意事項

1. **ライセンス遵守**
   - 使用するLLMモデルのライセンスを確認
   - 商用利用可能なモデルのみを選択

2. **セキュリティ**
   - 医療情報の入力は推奨しません
   - あくまで業務支援ツールとして使用

3. **サポート**
   - 問題が発生した場合の連絡先を明記
   - アップデート方法の説明

## 更新・アンインストール

### アプリケーションの更新
1. 新しいインストーラーで上書きインストール
2. 既存のデータ（チャット履歴、モデル）は保持されます

### アンインストール
1. コントロールパネル > プログラムと機能
2. 「Medical Record LLM」を選択してアンインストール
3. ユーザーデータの削除（必要に応じて）:
   - `%APPDATA%\Medical Record LLM`フォルダを手動削除